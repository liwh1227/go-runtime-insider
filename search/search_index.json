{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Go Runtime Insider: The Comprehensive Verification Lab","text":"\u4e2d\u6587\u8bf4\u660e | English Readme"},{"location":"#go-runtime","title":"Go Runtime \u5185\u6838\u900f\u89c6\uff1a\u786e\u8bc1\u9a71\u52a8\u7684\u6df1\u5ea6\u5b9e\u9a8c\u5ba4","text":"<p>\"Don't trust the docs, verify with data.\" \"\u4e0d\u8ff7\u4fe1\u6587\u6863\uff0c\u53ea\u76f8\u4fe1\u5b9e\u8bc1\u3002\"</p>"},{"location":"#vision","title":"\ud83d\udcd6 \u9879\u76ee\u613f\u666f (Vision)","text":"<p>Go Runtime Insider \u662f\u4e00\u4e2a\u81f4\u529b\u4e8e\u89e3\u6784 Go \u8bed\u8a00\u8fd0\u884c\u65f6\uff08Runtime\uff09\u5185\u90e8\u673a\u5236\u7684\u5b9e\u9a8c\u6027\u9879\u76ee\u3002\u5927\u591a\u6570\u5de5\u7a0b\u5e08\u505c\u7559\u5728\u201c\u80cc\u8bf5\u516b\u80a1\u6587\u201d\u7684\u9636\u6bb5\uff0c\u800c\u672c\u9879\u76ee\u65e8\u5728\u901a\u8fc7\u79d1\u5b66\u5b9e\u9a8c\u548c\u6570\u636e\u89c2\u6d4b\uff0c\u5efa\u7acb\u5bf9 Runtime \u884c\u4e3a\u7684 \u786e\u8bc1\u80fd\u529b (Verification Capability)\u3002</p> <p>\u672c\u9879\u76ee\u5c06 Go Runtime \u89c6\u4e3a\u4e00\u4e2a\u5f85\u89e3\u5256\u7684\u590d\u6742\u7cfb\u7edf\uff0c\u901a\u8fc7 \u9ed1\u76d2\u9065\u6d4b (Telemetry)\u3001\u7070\u76d2\u53ef\u89c6\u5316 (Visualization) \u548c \u767d\u76d2\u6e90\u7801\u6ce8\u5165 (Source Injection) \u4e09\u79cd\u624b\u6bb5\uff0c\u6df1\u5165\u63a2\u7d22\u4ee5\u4e0b\u6838\u5fc3\u9886\u57df\uff1a</p> <ol> <li>\u8c03\u5ea6\u5668 (Scheduler): GMP \u6a21\u578b\u3001Work-stealing\u3001\u5f02\u6b65\u62a2\u5360\u3002</li> <li>\u5185\u5b58\u5b50\u7cfb\u7edf (Memory Subsystem): TCMalloc \u5206\u914d\u5668\u3001\u4e09\u8272\u6807\u8bb0 GC\u3001\u6df7\u5408\u5199\u5c4f\u969c\u3002</li> <li>\u6838\u5fc3\u7ed3\u6784 (Core Structures): Swiss Map (Go 1.24+)\u3001Hashed Wheel Timer\u3001Channel \u5185\u90e8\u673a\u5236\u3002</li> </ol>"},{"location":"#modules","title":"\ud83d\udd2c \u5b9e\u9a8c\u6a21\u5757 (Modules)","text":"<p>\u672c\u9879\u76ee\u6309 Runtime \u6838\u5fc3\u7ec4\u4ef6\u5212\u5206\u4e3a\u4e0d\u540c\u6a21\u5757\uff0c\u6bcf\u4e2a\u6a21\u5757\u5305\u542b\u82e5\u5e72\u4e2a\u5faa\u5e8f\u6e10\u8fdb\u7684\u5b9e\u9a8c\u3002</p>"},{"location":"#1-scheduling-gmp","title":"1. \ud83e\udde0 \u8ba1\u7b97\u4e0e\u8c03\u5ea6 (Scheduling &amp; GMP)","text":"<p>\u6df1\u5165\u7406\u89e3 Goroutine \u7684\u751f\u8001\u75c5\u6b7b\u4e0e CPU \u8d44\u6e90\u7684\u6d41\u8f6c\u3002</p> <ul> <li>[EXP-01] \u8d1f\u8f7d\u5747\u8861\u9a8c\u8bc1:<ul> <li>\u5229\u7528 <code>GODEBUG=schedtrace=1000</code> \u89c2\u6d4b\u5168\u5c40\u961f\u5217\u4e0e\u672c\u5730\u961f\u5217\u7684\u538b\u529b\u5206\u5e03\u3002</li> <li>\u533a\u5206 CPU \u9971\u548c\u4e0e\u9501\u7ade\u4e89\u5bfc\u81f4\u7684\u6027\u80fd\u74f6\u9888\u3002</li> </ul> </li> <li>[EXP-02] \u5f02\u6b65\u62a2\u5360\u53ef\u89c6\u5316:<ul> <li>\u4f7f\u7528 <code>go tool trace</code> \u6355\u6349\u6b7b\u5faa\u73af\u534f\u7a0b\u88ab <code>SIGURG</code> \u4fe1\u53f7\u5f3a\u5236\u5207\u5206\u7684\u5fae\u79d2\u7ea7\u8bc1\u636e (Go 1.14+)\u3002</li> </ul> </li> <li>[EXP-03] \u7a83\u53d6\u8def\u5f84\u8ffd\u8e2a (Runtime Hacking):<ul> <li>[Hardcore] \u4fee\u6539 <code>runtime/proc.go</code>\uff0c\u6ce8\u5165\u63a2\u9488\u6253\u5370 Work-stealing \u7684\u7cbe\u786e\u62d3\u6251\uff08P1 \u5077\u4e86 P2\uff09\uff0c\u9a8c\u8bc1 CPU \u4eb2\u548c\u6027\u3002</li> </ul> </li> </ul>"},{"location":"#2-memory-gc","title":"2. \ud83d\udcbe \u5185\u5b58\u4e0e\u5783\u573e\u56de\u6536 (Memory &amp; GC)","text":"<p>\u900f\u89c6\u5bf9\u8c61\u5728 Heap \u4e0a\u7684\u5206\u914d\u8def\u5f84\u4e0e\u56de\u6536\u673a\u5236\u3002</p> <ul> <li>[EXP-04] \u5206\u914d\u5668\u884c\u4e3a\u786e\u8bc1:<ul> <li>\u9a8c\u8bc1 Tiny \u5bf9\u8c61 (&lt;16B) \u4e0e Small \u5bf9\u8c61\u5728 <code>mcache</code> \u4e2d\u7684\u5206\u914d\u903b\u8f91\u3002</li> <li>\u4f7f\u7528 <code>go build -gcflags=\"-m\"</code> \u7ed3\u5408 Benchmark \u9a8c\u8bc1\u9003\u9038\u5206\u6790\u5bf9\u6027\u80fd\u7684\u5f71\u54cd\u3002</li> </ul> </li> <li>[EXP-05] GC Pacing \u4e0e\u538b\u529b\u6d4b\u8bd5:<ul> <li>\u901a\u8fc7 <code>GODEBUG=gctrace=1</code> \u5206\u6790 <code>p</code> (Pacing ratio) \u7684\u53d8\u5316\u3002</li> <li>\u5b9e\u6d4b <code>GOGC</code> \u4e0e <code>GOMEMLIMIT</code> \u5728\u5bb9\u5668\u73af\u5883\u4e0b\u7684 OOM \u9632\u62a4\u6548\u679c\u3002</li> </ul> </li> <li>[EXP-06] \u5199\u5c4f\u969c\u89c2\u6d4b:<ul> <li>[Hardcore] \u6df1\u5165\u6df7\u5408\u5199\u5c4f\u969c (Hybrid Write Barrier) \u6e90\u7801\uff0c\u9a8c\u8bc1\u5bf9\u8c61\u989c\u8272\u5728\u5e76\u53d1\u6807\u8bb0\u9636\u6bb5\u7684\u6d41\u8f6c\u3002</li> </ul> </li> </ul>"},{"location":"#3-data-structures","title":"3. \ud83c\udfd7\ufe0f \u6570\u636e\u7ed3\u6784\u4e0e\u5e76\u53d1 (Data Structures)","text":"<p>\u5256\u6790 Go \u6838\u5fc3\u6570\u636e\u7ed3\u6784\u7684\u6f14\u8fdb\u4e0e\u8bbe\u8ba1\u6743\u8861\u3002</p> <ul> <li>[EXP-07] Swiss Map \u6027\u80fd\u9769\u547d:<ul> <li>\u5bf9\u6bd4 Go 1.24 \u65b0\u7248 Swiss Map \u4e0e\u65e7\u7248 Map \u5728\u9ad8\u5e76\u53d1\u8bfb\u5199\u4e0b\u7684 CPU Cache Miss \u7387 (\u4f7f\u7528 <code>perf</code>)\u3002</li> <li>\u9a8c\u8bc1 SIMD \u6307\u4ee4\u52a0\u901f\u63a2\u6d4b\u7684\u5b9e\u9645\u6536\u76ca\u3002</li> </ul> </li> <li>[EXP-08] \u5b9a\u65f6\u5668\u65f6\u95f4\u8f6e (Timing Wheel):<ul> <li>\u9a8c\u8bc1 Go 1.14+ \u5f15\u5165\u7684 Netpoller \u96c6\u6210\u5b9a\u65f6\u5668\u5982\u4f55\u6d88\u9664\u539f\u672c\u7684\u5806\u9501\u7ade\u4e89\u3002</li> </ul> </li> </ul>"},{"location":"#methodology","title":"\ud83d\udee0\ufe0f \u65b9\u6cd5\u8bba (Methodology)","text":"<p>\u672c\u9879\u76ee\u4e25\u683c\u9075\u5faa \"\u89c2\u5bdf-\u5047\u8bbe-\u9a8c\u8bc1\" \u7684\u95ed\u73af\uff1a</p> <ol> <li>Level 1: \u9ed1\u76d2 (Blackbox)<ul> <li>\u4e0d\u4fee\u6539\u4ee3\u7801\uff0c\u4ec5\u901a\u8fc7\u73af\u5883\u53d8\u91cf (<code>GODEBUG</code>) \u548c\u6807\u51c6 Metrics \u89c2\u6d4b Runtime \u5916\u90e8\u8868\u73b0\u3002</li> </ul> </li> <li>Level 2: \u7070\u76d2 (Greybox)<ul> <li>\u4f7f\u7528 Profiling \u5de5\u5177 (<code>pprof</code>, <code>trace</code>, <code>perf</code>) \u67e5\u770b\u51fd\u6570\u8c03\u7528\u6808\u548c\u7cfb\u7edf\u4e8b\u4ef6\u3002</li> </ul> </li> <li>Level 3: \u767d\u76d2 (Whitebox)<ul> <li>\u4fee\u6539\u5e76\u91cd\u65b0\u7f16\u8bd1 Go Runtime \u6e90\u7801\uff0c\u6ce8\u5165\u81ea\u5b9a\u4e49\u65e5\u5fd7\u548c\u94a9\u5b50\uff0c\u83b7\u53d6\u7b2c\u4e00\u624b\u5185\u6838\u6570\u636e\u3002</li> </ul> </li> </ol>"},{"location":"#quick-start","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb (Quick Start)","text":""},{"location":"#_1","title":"\u73af\u5883\u51c6\u5907","text":"<pre><code># \u63a8\u8350\u4f7f\u7528 Go 1.20+ (\u90e8\u5206\u5b9e\u9a8c\u9700\u8981 Go 1.24RC)\ngo version\n\n# \u514b\u9686\u4ed3\u5e93\ngit clone [https://github.com/liwh1227/go-runtime-insider.git](https://github.com/liwh1227/go-runtime-insider.git)\ncd go-runtime-insider\n</code></pre>"},{"location":"#author","title":"\ud83d\udc68\u200d\ud83d\udcbb \u4f5c\u8005 (Author)","text":"<p>Go Runtime Researcher &amp; System Architect \u4e13\u6ce8\u4e8e\u5206\u5e03\u5f0f\u7cfb\u7edf\u67b6\u6784\u4e0e Go \u8bed\u8a00\u5e95\u5c42\u539f\u7406\u3002\u81f4\u529b\u4e8e\u901a\u8fc7\u5b9e\u9a8c\u6570\u636e\u63ed\u793a\u8f6f\u4ef6\u7cfb\u7edf\u7684\u7269\u7406\u5b9a\u5f8b\u3002</p>"},{"location":"#go-runtime-insider-the-comprehensive-verification-lab_1","title":"Go Runtime Insider: The Comprehensive Verification Lab","text":"<p>\"Moving beyond theory to empirical evidence.\"</p>"},{"location":"#vision_1","title":"\ud83d\udcd6 Vision","text":"<p>Go Runtime Insider is an experimental project dedicated to deconstructing the internal mechanics of the Go Runtime. While many engineers stop at memorizing concepts, this project aims to build Verification Capability through scientific experiments and empirical observation.</p> <p>We treat the Go Runtime as a complex system to be dissected using three methodologies: Blackbox Telemetry, Greybox Visualization, and Whitebox Source Injection, covering the following core areas:</p> <ol> <li>Scheduler: GMP model, Work-stealing, Asynchronous Preemption.</li> <li>Memory Subsystem: TCMalloc allocator, Tri-color GC, Hybrid Write Barrier.</li> <li>Core Structures: Swiss Map (Go 1.24+), Hashed Wheel Timer, Channel internals.</li> </ol>"},{"location":"#modules_1","title":"\ud83d\udd2c Modules","text":"<p>The project is organized into modules corresponding to Go Runtime components.</p>"},{"location":"#1-scheduling-gmp_1","title":"1. \ud83e\udde0 Scheduling &amp; GMP","text":"<p>Understanding the lifecycle of Goroutines and CPU resource flow.</p> <ul> <li>[EXP-01] Load Balance Verification:<ul> <li>Observe pressure distribution on Global/Local queues using <code>GODEBUG=schedtrace=1000</code>.</li> <li>Distinguish between CPU saturation and lock contention.</li> </ul> </li> <li>[EXP-02] Preemption Visualization:<ul> <li>Capture microsecond-level evidence of tight-loop goroutines being sliced by <code>SIGURG</code> signals using <code>go tool trace</code> (Go 1.14+).</li> </ul> </li> <li>[EXP-03] Stealing Path Trace (Runtime Hacking):<ul> <li>[Hardcore] Modify <code>runtime/proc.go</code> to log the precise topology of Work-stealing, verifying CPU affinity.</li> </ul> </li> </ul>"},{"location":"#2-memory-gc_1","title":"2. \ud83d\udcbe Memory &amp; GC","text":"<p>Visualizing object allocation paths and reclamation mechanics.</p> <ul> <li>[EXP-04] Allocator Behavior:<ul> <li>Verify allocation logic for Tiny (&lt;16B) vs. Small objects in <code>mcache</code>.</li> <li>Benchmark the impact of Escape Analysis using <code>go build -gcflags=\"-m\"</code>.</li> </ul> </li> <li>[EXP-05] GC Pacing &amp; Stress Test:<ul> <li>Analyze <code>p</code> (Pacing ratio) dynamics via <code>GODEBUG=gctrace=1</code>.</li> <li>Test <code>GOGC</code> vs. <code>GOMEMLIMIT</code> protection in containerized environments.</li> </ul> </li> <li>[EXP-06] Write Barrier Observation:<ul> <li>[Hardcore] Dive into Hybrid Write Barrier source code to verify object coloring flows during concurrent marking.</li> </ul> </li> </ul>"},{"location":"#3-data-structures_1","title":"3. \ud83c\udfd7\ufe0f Data Structures","text":"<p>Dissecting design trade-offs of core Go structures.</p> <ul> <li>[EXP-07] Swiss Map Revolution:<ul> <li>Compare CPU Cache Miss rates of Go 1.24 Swiss Map vs. Old Map using <code>perf</code>.</li> <li>Verify the actual gains from SIMD probing.</li> </ul> </li> <li>[EXP-08] Timing Wheel:<ul> <li>Verify how Netpoller-integrated timers (Go 1.14+) eliminate heap lock contention.</li> </ul> </li> </ul>"},{"location":"#methodology_1","title":"\ud83d\udee0\ufe0f Methodology","text":"<p>We strictly follow the \"Observe - Hypothesize - Verify\" loop:</p> <ol> <li>Level 1: Blackbox<ul> <li>Observe external behavior using Env Vars (<code>GODEBUG</code>) and Metrics without code modification.</li> </ul> </li> <li>Level 2: Greybox<ul> <li>Inspect call stacks and system events using Profiling tools (<code>pprof</code>, <code>trace</code>, <code>perf</code>).</li> </ul> </li> <li>Level 3: Whitebox<ul> <li>Modify and recompile Go Runtime source code to inject custom logs and hooks for first-hand kernel data.</li> </ul> </li> </ol>"},{"location":"#quick-start_1","title":"\ud83d\ude80 Quick Start","text":""},{"location":"#prerequisites","title":"Prerequisites","text":"<pre><code># Go 1.20+ Recommended (Go 1.24RC for some experiments)\ngo version\n\n# Clone Repo\ngit clone [https://github.com/liwh1227/go-runtime-insider.git](https://github.com/liwh1227/go-runtime-insider.git)\ncd go-runtime-insider\n</code></pre>"},{"location":"#author_1","title":"\ud83d\udc68\u200d\ud83d\udcbb Author","text":"<p>Go Runtime Researcher &amp; System Architect Focusing on distributed system architecture and Go language internals. Dedicated to revealing the physical laws of software systems through empirical data.</p>"}]}